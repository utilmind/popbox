!function(o){"use strict";var s={autoShow:15e3,autoClose:6e4,autoShowDisabled:!1,showOnScrollStart:48,showOnScrollEnd:52,closeOnDimmer:!0,closeOnEsc:!0,noPropagateClicks:!1,onShow:!1,onHide:!1,classes:{popbox:"popbox",workarea:"workarea",fixed:"popbox-fixed",noOverflow:"popbox-no-overflow",closeButton:"popbox-close",closeCountdownMsg:"popbox-close-msg",closeCountdownDigits:"popbox-close-countdown"},timerShow:!1,timerClose:!1,scrollHook:!1,autoShowUsed:!1,showCnt:0,scrollPosition:{y:0,top:"",class:"",save:function(s){this.y=$(o).scrollTop(),this.top=o.getComputedStyle(document.body).top,document.body.style.top=-this.y+"px",$("body").addClass(this.class=s)},restore:function(s){$("body").removeClass(s||this.class),document.body.style.top=this.top,o.scrollTo(0,this.y)}},init:function(o){var s=this;o&&$.extend(this,o),doInit(function(){if("undefined"==typeof $)return 1;s.noPropagateClicks&&$("."+s.classes.popbox+" ."+s.classes.workarea).click(function(o){o.stopPropagation()}),s.closeOnDimmer&&$("."+s.classes.popbox).click(function(o){o.stopPropagation(),s.hide()}),$("."+s.classes.closeButton).click(function(o){o.stopPropagation(),o.preventDefault(),s.hide()}),s.autoClose>0&&$("."+s.classes.popbox).find("input, textarea, select").keydown(function(o){s.stopTimerHide(),$(this).off("keydown")}),s.autoShowDisabled&&"scroll"!=s.autoShowDisabled||doInit(function(){s.startAutoShow("scroll"==s.autoShowDisabled)},2)})},isVisible:function(){return $("."+this.classes.popbox).is(":visible")},show:function(o){var s=this;if(!s.isVisible()){if(0==s.showCnt&&s.disableAutoShow(),++s.showCnt,o){$("."+this.classes.closeCountdownMsg).show(),$("."+s.classes.closeCountdownDigits).show();var t=o/1e3;$("."+s.classes.closeCountdownDigits).html(t),s.timerClose=setInterval(function(){--t,$("."+s.classes.closeCountdownDigits).html(t),t<=0&&s.hide()},1e3)}else $("."+s.classes.closeCountdownMsg).hide();s.scrollPosition.save(s.classes.fixed+" "+s.classes.noOverflow),$("."+s.classes.popbox).show(),s.closeOnEsc&&$(document).keydown(function(o){27==o.keyCode&&s.isVisible()&&(o.stopPropagation(),s.hide(),$(document).off("keydown"))}),s.onShow&&s.onShow()}},hide:function(){var o=this;o.stopTimerHide(),$("."+o.classes.popbox).hide(),o.scrollPosition.restore(),o.onHide&&o.onHide()},stopTimerHide:function(){this.timerClose&&(clearInterval(this.timerClose),this.timerClose=!1,$("."+this.classes.closeCountdownMsg).hide())},startAutoShow:function(s){var t=this,e=function(){0==t.showCnt?t.show(t.autoClose):t.disableAutoShow()},n=function(){t.autoShow&&!t.timerShow&&(t.timerShow=setTimeout(function(){e()},t.autoShow))};t.autoShowUsed||(t.autoShowUsed=1,s||n(),(s||t.showOnScrollEnd>t.showOnScrollStart)&&$(o).scroll(t.scrollHook=function(i){if(s&&n(),t.showOnScrollEnd>t.showOnScrollStart){var l=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement&&document.documentElement.scrollHeight||document.body.scrollHeight;l+(o.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight)>c/100*t.showOnScrollStart&&l<c/100*t.showOnScrollEnd&&e()}}))},disableAutoShow:function(){this.autoShowUsed&&(this.timerShow&&clearInterval(this.timerShow),this.scrollHook&&$(o).unbind("scroll"))}};o.PopBox||(o.PopBox=s)}("undefined"!=typeof window?window:this);