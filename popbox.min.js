!function(o){"use strict";var s={auto_show:15e3,auto_close:6e4,show_on_scroll_start:48,show_on_scroll_end:52,closeable_on_dimmer:!0,classes:{popbox:"popbox",workarea:"workarea",fixed:"popbox-fixed",no_overflow:"popbox-no-overflow",close_button:"close_button",close_countdown_text:"close_msg",close_countdown_digits:"close_countdown"},auto_shown:!1,auto_close_timer:!1,scrollY:0,topProperties:"",init:function(s){var e=this;s&&$.extend(this,s),doInit(function(){if("undefined"==typeof $)return 1;$("."+e.classes.popbox+" ."+e.classes.workarea).click(function(o){o.stopPropagation()}),$("."+e.classes.popbox+" input").keydown(function(o){e.stop_hide_timer()}),$("."+e.classes.close_button).click(function(o){e.hide()}),e.closeable_on_dimmer&&$("."+e.classes.popbox).click(function(o){e.hide()}),e.show_on_scroll_end>e.show_on_scroll_start&&$(o).scroll(function(s){var t=$(o).scrollTop();t+document.body.clientHeight>document.body.scrollHeight/100*e.show_on_scroll_start&&t<document.body.scrollHeight/100*e.show_on_scroll_end&&e.show(e.auto_close)}),$(document).keydown(function(o){$("."+e.classes.popbox).is(":visible")&&27==o.keyCode&&(o.preventDefault(),o.stopPropagation(),e.hide())}),doInit(function(){e.auto_show&&setTimeout(function(){e.show(e.auto_close)},e.auto_show)},2)})},is_visible:function(){return $("."+this.classes.popbox).is(":visible")},show:function(s){var e=this;if(!e.is_visible()&&!e.auto_shown){if(e.override_scrollbar(1),$("."+e.classes.popbox).show(),s){e.auto_shown=1,$("."+e.classes.close_countdown).show();var t=s/1e3;$("."+e.classes.close_countdown_digits).html(t),e.auto_close_timer=setInterval(function(){--t,$("."+e.classes.close_countdown_digits).html(t),0==t&&e.hide()},1e3)}else $("."+e.classes.close_countdown).hide();e.show_on_scroll_end>e.show_on_scroll_start&&$(o).unbind("scroll")}},hide:function(){clearInterval(this.auto_close_timer),$("."+this.classes.popbox).hide(),this.override_scrollbar(0)},stop_hide_timer:function(){clearInterval(me.auto_close_timer),$("."+this.classes.close_countdown).hide()},override_scrollbar:function(s){s?(this.scrollY=$(o).scrollTop(),this.topProperties=o.getComputedStyle(document.body).top,document.body.style.top=-this.scrollY+"px",$("body").addClass(this.classes.fixed+" "+this.classes.no_overflow)):($("body").removeClass(this.classes.fixed+" "+this.classes.no_overflow),document.body.style.top=this.topProperties,o.scrollTo(0,this.scrollY))}};o.PopBox||(o.PopBox=s)}("undefined"!=typeof window?window:this);